<!DOCTYPE html>

<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Employee Info Website</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link href="https://canvasjs.com/assets/css/jquery-ui.1.11.2.min.css" rel="stylesheet" />
  <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td,
    th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }
  </style>

  <script>

    window.onload = function () {

      var ageBetweenZeroToOneTwenty;
      var options;

      var dataFromAPI = $.get(
        "http://dummy.restapiexample.com/api/v1/employees",
        function (data) {
          var dataPoints = [];

          var parseObj = JSON.parse(data);

          for (var i = 0; i < parseObj.length; i++) {
            $(".employeeData")
              .append("<tr> <td>" + i + "</td> <td>" + parseObj[i].id + "</td> <td> " + parseObj[i].employee_name + "</td> <td> " + parseObj[i].employee_salary + "</td> <td> " + parseObj[i].employee_age + "</td> </tr>")
          }
          ageBetweenZeroToOneTwenty = parseObj.filter((everyEmployeeAge) => everyEmployeeAge.employee_age <= 120)

          for (var i = 0; i < ageBetweenZeroToOneTwenty.length; i++) {

            dataPoints.push({
              x: parseInt(ageBetweenZeroToOneTwenty[i].employee_age),
              y: i
            })
          }
          console.log("dataPoints  is ", dataPoints);


          this.options = {
            animationEnabled: true,
            title: {
              text: "Employees Data "
            },
            axisY: {
              title: "Employee Counts",
              titleFontSize: 24
            },
            axisX: {
              title: "Employee's Age between 0 and 120 ",
              titleFontSize: 24,
            },

            data: [{
              type: "column", //change it to line, area, bar, pie, etc	
              dataPoints
            }]
          };

          $("#chartContainer").CanvasJSChart(this.options);


        });
    }
  </script>

</head>

<body>
  <div id="chartContainer" style="height: 300px; width: 100%;margin-bottom:3em;"></div>

  <section>
    <table class="employeeData">
      <tr>
        <th>SrNo.</th>
        <th>ID</th>
        <th>Empolye Name</th>
        <th>Empolye Age</th>
        <th>Empolye Salary</th>
      </tr>

    </table>
  </section>




  <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
  <script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>

</body>

</html>